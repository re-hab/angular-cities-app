(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{NCV5:function(t,e,n){"use strict";n.r(e),n.d(e,"CitiesModule",function(){return J});var a=n("ofXK"),i=n("fXoL");let c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Gb({type:t,selectors:[["app-cities"]],decls:1,vars:0,template:function(t,e){1&t&&i.Nb(0,"app-list")},styles:[""]}),t})();var o=n("PCNd"),r=n("3Pt+"),s=n("+0xr"),d=n("Xquq"),b=n("Dh3D"),u=n("M9IT"),l=n("0IaG"),f=n("kmnG"),m=n("qFsG"),h=n("bTqV");function p(t,e){if(1&t){const t=i.Tb();i.Sb(0,"button",7),i.Zb("click",function(){return i.nc(t),i.dc().add()}),i.yc(1,"Add"),i.Rb()}}function g(t,e){if(1&t){const t=i.Tb();i.Sb(0,"button",7),i.Zb("click",function(){return i.nc(t),i.dc().add()}),i.yc(1,"Update"),i.Rb()}}let y=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){}close(){this.dialogRef.close()}add(){this.dialogRef.close(this.data.name)}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(l.f),i.Mb(l.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-dialog"]],decls:15,vars:3,consts:[[1,"container"],["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click",4,"ngIf"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(t,e){1&t&&(i.Sb(0,"div",0),i.Sb(1,"h1",1),i.yc(2,"City"),i.Rb(),i.Sb(3,"div",2),i.Sb(4,"p"),i.yc(5,"Enter City Name"),i.Rb(),i.Sb(6,"mat-form-field"),i.Sb(7,"mat-label"),i.yc(8,"Name"),i.Rb(),i.Sb(9,"input",3),i.Zb("ngModelChange",function(t){return e.data.name=t}),i.Rb(),i.Rb(),i.Rb(),i.Sb(10,"div",4),i.Sb(11,"button",5),i.Zb("click",function(){return e.close()}),i.yc(12,"Cancel"),i.Rb(),i.xc(13,p,2,0,"button",6),i.xc(14,g,2,0,"button",6),i.Rb(),i.Rb()),2&t&&(i.Ab(9),i.ic("ngModel",e.data.name),i.Ab(4),i.ic("ngIf","ADD"==e.data.action),i.Ab(1),i.ic("ngIf","UPDATE"==e.data.action))},directives:[l.g,l.d,f.b,f.e,m.a,r.a,r.h,r.k,l.c,h.a,a.k],styles:[""]}),t})();var C=n("tk/3");let S=(()=>{class t{constructor(t){this.http=t}getCities(){return this.http.get(d.b.cities)}getCitiesofCountry(t){return this.http.get(d.b.citiesofCountry+t)}addCity(t){return this.http.post(d.b.cities,{Name:t.name,CountryId:t.countryId})}updateCity(t){return this.http.put(d.b.cities,{Id:t.id,Name:t.name,CountryId:t.countryId})}deleteCity(t){return this.http.delete(d.b.cityById+t)}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(C.b))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var w=n("5eHb"),I=n("tyNb"),M=n("bKjt"),R=n("Qs10"),x=n("NFeN");function D(t,e){if(1&t&&(i.Sb(0,"span"),i.yc(1),i.Rb()),2&t){const t=i.dc(2);i.Ab(1),i.Ac(" ",t.countryName," / ")}}function v(t,e){if(1&t&&(i.Sb(0,"h1",7),i.xc(1,D,2,1,"span",8),i.yc(2," Cities "),i.Rb()),2&t){const t=i.dc();i.Ab(1),i.ic("ngIf",t.dataSource.data.length>0)}}function k(t,e){1&t&&(i.Sb(0,"h1",7),i.yc(1,"Cities"),i.Rb())}function A(t,e){if(1&t){const t=i.Tb();i.Sb(0,"button",9),i.Zb("click",function(){return i.nc(t),i.dc().openDialog()}),i.yc(1," Add New City "),i.Nb(2,"i",10),i.Rb()}}function P(t,e){1&t&&(i.Sb(0,"p",11),i.yc(1,"There are no cities have been added for the selected country"),i.Rb())}function O(t,e){1&t&&(i.Sb(0,"th",21),i.yc(1," Name "),i.Rb())}function N(t,e){if(1&t&&(i.Sb(0,"td",22),i.yc(1),i.Rb()),2&t){const t=e.$implicit;i.Ab(1),i.Ac(" ",t.name," ")}}function _(t,e){1&t&&(i.Sb(0,"th",23),i.yc(1," Update "),i.Rb())}function z(t,e){if(1&t){const t=i.Tb();i.Sb(0,"td",22),i.Sb(1,"button",24),i.Zb("click",function(){i.nc(t);const n=e.$implicit;return i.dc(2).redirectToUpdate(n)}),i.Sb(2,"mat-icon",25),i.yc(3,"system_update"),i.Rb(),i.Rb(),i.Rb()}}function T(t,e){1&t&&(i.Sb(0,"th",23),i.yc(1," Delete "),i.Rb())}function Z(t,e){if(1&t){const t=i.Tb();i.Sb(0,"td",22),i.Sb(1,"button",26),i.Zb("click",function(){i.nc(t);const n=e.$implicit;return i.dc(2).redirectToDelete(n.id)}),i.Sb(2,"mat-icon",25),i.yc(3,"delete"),i.Rb(),i.Rb(),i.Rb()}}function j(t,e){1&t&&i.Nb(0,"tr",27)}function G(t,e){1&t&&i.Nb(0,"tr",28)}function U(t,e){if(1&t&&(i.Sb(0,"table",12),i.Qb(1,13),i.xc(2,O,2,0,"th",14),i.xc(3,N,2,1,"td",15),i.Pb(),i.Qb(4,16),i.xc(5,_,2,0,"th",17),i.xc(6,z,4,0,"td",15),i.Pb(),i.Qb(7,18),i.xc(8,T,2,0,"th",17),i.xc(9,Z,4,0,"td",15),i.Pb(),i.xc(10,j,1,0,"tr",19),i.xc(11,G,1,0,"tr",20),i.Rb()),2&t){const t=i.dc();i.ic("dataSource",t.dataSource),i.Ab(10),i.ic("matHeaderRowDef",t.displayedColumns),i.Ab(1),i.ic("matRowDefColumns",t.displayedColumns)}}const q=function(){return[2,4,6,10,20]};function H(t,e){1&t&&i.Nb(0,"mat-paginator",29),2&t&&i.ic("pageSize",4)("pageSizeOptions",i.jc(2,q))}let Q=(()=>{class t{constructor(t,e,n,a,i,c){this.cityService=t,this.toastr=e,this.dialog=n,this.router=a,this.route=i,this.countryService=c,this.displayedColumns=["name","update","delete"],this.dataSource=new s.k([])}ngOnInit(){this.route.params.subscribe(t=>{this.countryID=t.id,this.countryID?(this.getCountryName(this.countryID),this.getCountryCities(this.countryID)):this.getAllCities()})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}getAllCities(){this.cityService.getCities().subscribe(t=>{this.dataSource.data=t},t=>{this.toastr.error(d.c.errorMessage)})}getCountryName(t){this.countryService.getCountry(t).subscribe(t=>{this.countryName=t.name},t=>{this.toastr.error(d.c.errorMessage)})}getCountryCities(t){this.cityService.getCitiesofCountry(t).subscribe(t=>{this.dataSource.data=t},t=>{this.toastr.error(d.c.errorMessage)})}openDialog(){this.dialog.open(y,{width:"75%",data:{id:"",name:"",action:"ADD"}}).afterClosed().subscribe(t=>{t&&this.cityService.addCity({name:t,countryId:+this.countryID}).subscribe(t=>{let e=this.dataSource.data.slice();e.push(t),this.dataSource.data=e},t=>{this.toastr.error(d.c.errorMessage)})})}redirectToUpdate(t){this.dialog.open(y,{width:"75%",data:{id:t.id,name:t.name,action:"UPDATE"}}).afterClosed().subscribe(e=>{e&&this.cityService.updateCity({id:t.id,name:e}).subscribe(t=>{this.dataSource.data.forEach(e=>{e.id==t.id&&(e.name=t.name)})},t=>{this.toastr.error(d.c.errorMessage)})})}redirectToDelete(t){this.cityService.deleteCity(t).subscribe(t=>{let e=this.dataSource.data.filter(e=>e.id!=t.id);this.dataSource.data=e},t=>{this.toastr.error(d.c.errorMessage)})}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(S),i.Mb(w.b),i.Mb(l.b),i.Mb(I.b),i.Mb(I.a),i.Mb(M.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-list"]],viewQuery:function(t,e){if(1&t&&(i.Bc(b.a,!0),i.Bc(u.a,!0)),2&t){let t;i.kc(t=i.ac())&&(e.sort=t.first),i.kc(t=i.ac())&&(e.paginator=t.first)}},decls:9,vars:6,consts:[[1,"wrapper","container"],[1,"d-flex","justify-content-between","py-5"],["class","title","data-aos","fade-right",4,"ngIf"],["class","btn","mat-raised-button","","data-aos","fade-left",3,"click",4,"ngIf"],["class","desc",4,"ngIf"],["mat-table","","class","country-table","matSort","","data-aos","fade-up",3,"dataSource",4,"ngIf"],[3,"pageSize","pageSizeOptions",4,"ngIf"],["data-aos","fade-right",1,"title"],[4,"ngIf"],["mat-raised-button","","data-aos","fade-left",1,"btn",3,"click"],[1,"fa","fa-plus","text-white","ml-2","text-xs-sm","d-inline-block","mb-1"],[1,"desc"],["mat-table","","matSort","","data-aos","fade-up",1,"country-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","class","larger-text",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","update"],["mat-header-cell","","class","larger-text",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",1,"larger-text"],["mat-cell",""],["mat-header-cell","",1,"larger-text"],["mat-icon-button","","color","accent",3,"click"],[1,"mat-18"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[3,"pageSize","pageSizeOptions"]],template:function(t,e){1&t&&(i.Sb(0,"section",0),i.Nb(1,"app-side-nav"),i.Sb(2,"div",1),i.xc(3,v,3,1,"h1",2),i.xc(4,k,2,0,"h1",2),i.xc(5,A,3,0,"button",3),i.Rb(),i.xc(6,P,2,0,"p",4),i.xc(7,U,12,3,"table",5),i.xc(8,H,1,3,"mat-paginator",6),i.Rb()),2&t&&(i.Ab(3),i.ic("ngIf",e.countryID),i.Ab(1),i.ic("ngIf",!e.countryID),i.Ab(1),i.ic("ngIf",e.countryID),i.Ab(1),i.ic("ngIf",0==e.dataSource.data.length),i.Ab(1),i.ic("ngIf",e.dataSource.data.length>0),i.Ab(1),i.ic("ngIf",e.dataSource.data.length>0))},directives:[R.a,a.k,h.a,s.j,b.a,s.c,s.e,s.b,s.g,s.i,s.d,b.b,s.a,x.a,s.f,s.h,u.a],styles:[".wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.8rem}.wrapper[_ngcontent-%COMP%]   .larger-text[_ngcontent-%COMP%]{font-size:1.1rem}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:var(--secondary);color:var(--white);font-size:1rem;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{opacity:.8}.wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden;min-width:500px;margin:auto;width:100%!important}.wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:300px}.wrapper[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:1rem}@media only screen and (max-width:768px){table[_ngcontent-%COMP%]{min-width:50px!important}.title[_ngcontent-%COMP%]{font-size:1.3rem!important}.larger-text[_ngcontent-%COMP%]{font-size:.8rem!important}.btn[_ngcontent-%COMP%]{font-size:.7rem!important}}"]}),t})();const E=[{path:"",component:c}];let F=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[I.d.forChild(E)],I.d]}),t})(),J=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[a.c,o.a,r.f,F,I.d]]}),t})();i.qc(c,[Q],[])}}]);